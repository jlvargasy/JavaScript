<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>JavaScript can change table content on the fly</title>
  <link rel="stylesheet" href="build-table.css">
</head>
<body>
  <h2>Listado de Contactos</h2>
  <button onclick="buildTable();">Listar</button>
  <table id="myTable">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Apellido</th>
      </tr>
    </thead>
    <tbody id="tableContactBody">
    </tbody>
  </table>
    <footer>JavaScript</footer>
<script>
var persons = [
  {name:'Michel', age:51},
  {name:'Henri', age:20},
  {name:'Francois', age:29}
];

var tableBody = document.querySelector("#tableContactBody");


  function buildTable() {
  	  // Get the body of the table using the selector API
  	for(let j in persons) {
  		addLineToHTMLTable(persons[j].name, persons[j].age);
  	}
  } 

   var pos;
  function removeRow(buttonCellParm) {
    pos = buttonCellParm.parentNode.parentNode.rowIndex;
    document.getElementById("myTable").deleteRow(pos);
  }

// Add a row to the HTML table
function addLineToHTMLTable(name, age) {
    
    // Add a new row at the end of the table
    var newRow   = tableBody.insertRow();

   // add  new cells to the row
   var firstNameCell  = newRow.insertCell();
   firstNameCell.innerHTML = name;
  
   var lastNameCell   = newRow.insertCell();
   lastNameCell.innerHTML = age;

   var buttonCell   = newRow.insertCell(); 
   //buttonCell.innerHTML = '<button onclick="removeRow(this)">Delete</button>';

   var boton = document.createElement('input');
   boton.setAttribute(name="type", value="button");
   boton.setAttribute(name="value", value="Delete");
   boton.setAttribute(name="onclick", value="removeRow(this)");
   buttonCell.append(boton);
}
</script>
</body>
</html>

